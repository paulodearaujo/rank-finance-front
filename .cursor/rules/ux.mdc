---
alwaysApply: true
---

# Regras de UI/UX deste proketo

> **Objetivo:** entregar interfaces com o rigor de Apple/Uber/Airbnb: claras, r√°pidas, acess√≠veis e consistentes, sem ‚Äúgambiarras‚Äù.
> **Regra-m√£e:** preferimos menos op√ß√µes, mais inten√ß√£o. Todo elemento na tela precisa justificar sua exist√™ncia.

---

## 0) Stack e como usar

* **Componentes base:** `@shadcn/ui` (Radix + Tailwind).
* **Onde ficam:** `src/components/ui` + aliases de `components.json`.
* **Padr√£o de varia√ß√£o:** use `class-variance-authority (cva)` para variantes; **n√£o** crie variantes ad‚Äëhoc.
* **Wrapper sem div extra:** prefira `asChild` e `Slot` (Radix) quando for compor sem quebrar sem√¢ntica.
* **Utilit√°rios can√¥nicos:** `cn()` para merge de classes; tokens CSS via `:root` e `data-theme` (dark, hc).

---

## 1) **N√£o-negoci√°veis**

* **Acessibilidade:** WCAG **2.2 AA** no m√≠nimo + alvo **APCA Lc ‚â• 75** para texto padr√£o e **‚â• 90** para <14‚ÄØpx.
* **Performance (CWV):** LCP ‚â§ **1.8‚ÄØs**, INP ‚â§ **200‚ÄØms**, CLS ‚â§ **0.1**, TTFB ‚â§ **0.8‚ÄØs**, TBT ‚â§ **150‚ÄØms**.
* **Resposta de UI:** **<100‚ÄØms** para a√ß√µes locais; **<400‚ÄØms** (Doherty) ou mostrar ‚Äúfeedback de progresso‚Äù em **‚â§150‚ÄØms**.
* **Motion segura:** respeitar `prefers-reduced-motion`; 60‚ÄØfps (budget \~16.7‚ÄØms/frame).
* **Consist√™ncia:** 8‚Äëpt system, **tipografia modular**, **tokens de cor OKLCH**, densidades definidas.

---

## 2) **Design Tokens (fonte √∫nica da verdade)**

Defina em `globals.css`

**Regras:**

* **Contrast-first:** valide APCA/AA sempre que tocar em cor.
* **Brand scale:** 10 steps (1‚Äì12) inspirados em Radix; mapeie `primary/secondary/accent`.
* **Elevations:** sombras discretas + **overlay color**; n√£o use blur ‚Äúvidro‚Äù sem justificativa de legibilidade.
* **Evite** definir estilos fora de `globals.css`.

**Tokens œÜ (opt-in editorial, arredondados para o grid 4/8):**

* Use somente quando ativar o **Modo Editorial** (ver ¬ß16).
* Espa√ßamentos aproximando-se de œÜ sem quebrar o 8-pt:
  * `--space-phi-1: 16px`  (8√ó1.618‚âà13 ‚Üí 16)
  * `--space-phi-2: 24px`  (13√ó1.618‚âà21 ‚Üí 24)
  * `--space-phi-3: 32px`  (21√ó1.618‚âà34 ‚Üí 32)
  * `--space-phi-4: 56px`  (34√ó1.618‚âà55 ‚Üí 56)
* Ritmo Fibonacci (opt-in; m√°x. 3 n√≠veis por tela), sempre arredonde:
  * `--space-f-1: 13px` ‚Üí use 12/16
  * `--space-f-2: 21px` ‚Üí use 20/24
  * `--space-f-3: 34px` ‚Üí use 32/36
  * `--space-f-4: 55px` ‚Üí use 56

---

## 3) **Tipografia**

* **Fonte da verdade:** usar os componentes de **Typography do shadcn** (<https://ui.shadcn.com/docs/components/typography>) conforme a doc oficial; **sem CSS ad-hoc** para texto base.
* **Legibilidade m√≠nima:** par√°grafos com **60‚Äì80 caracteres** de largura; `line-height` do corpo **1.4‚Äì1.6**; n√∫meros tabulares em m√©tricas/tabelas (`tabular-nums`).
* **Editorial opcional:** varia√ß√µes de escala apenas em headings via **Modo Editorial œÜ** (¬ß16); corpo permanece nos tamanhos padr√£o do shadcn.

---

## 4) **Layout & Grid**

* **Sistema:** 12 colunas, **gutter 24** desktop / **16** mobile.
* **Cont√™ineres:** `sm: 640, md: 768, lg: 1024, xl: 1280, 2xl: 1536`.
* **Espa√ßamento:** m√∫ltiplos de 4/8; **n√£o** usar valores m√°gicos.
* **Densidades:** `comfortable` (padr√£o), `compact` (data-heavy), `cozy` (marketing).

**4.1 Colunas œÜ (opt-in editorial, duas colunas):**

* **Alvo aproximado:** **62/38**. Em grid 12-col, use **7/5 (~58/42)** ou **8/4 (~66/33)**.
* **Condi√ß√£o:** viewport **‚â•1280px**. Em telas menores, **n√£o preservar œÜ**: priorize leitura e ordem sem√¢ntica.
* **Alinhamento:** manter baseline 8-pt, gutters can√¥nicos e sem ‚Äúmeia coluna‚Äù.

---

## 5) **Intera√ß√£o & Navega√ß√£o**

* **Modelos can√¥nicos:** topo (global) + lateral (se√ß√µes) + breadcrumb. Evite subn√≠veis al√©m de 3.
* **Busca como atalho:** `‚åòK`/`Ctrl K` command palette com a√ß√µes r√°pidas.
* **CTAs:** 1 prim√°rio por tela; secund√°rio claro; links estilizados como links.
* **Modais:** s√≥ para tarefas bloqueantes. Caso contr√°rio, **Sheet/Drawer**.
* **Undo > confirmar:** onde poss√≠vel, a√ß√£o imediata com **undo** (snackbar/toast com timer).
* **Focus management:** `focus-visible` com anel de foco: 2 px, offset 2 px, usando `--ring`.

---

## 6) **Estados (loading, erro, vazio, offline)**

* **At√© 150 ms:** nada (evite ‚Äúflicker‚Äù).
* **150‚Äì800 ms:** **progress bar indeterminado** ou **skeleton** alinhado ao layout.
* **>800 ms:** texto de contexto + tempo/benef√≠cio (‚ÄúIsso leva ~2 s pois‚Ä¶‚Äù).
* **Erro:** mensagem humana, a√ß√£o de recupera√ß√£o, `aria-live="assertive"`.
* **Vazio:** explique valor + CTA para o primeiro passo.
* **Offline:** banner persistente, fila idempotente de a√ß√µes e r√≥tulos ‚Äúsincroniza quando voltar‚Äù.

---

## 7) **Acessibilidade**

* **Sem√¢ntica primeiro:** `button` para a√ß√µes, `a` para navega√ß√£o; `aria-label` somente quando n√£o houver texto vis√≠vel.
* **Teclado total:** **tudo** alcan√ß√°vel com Tab/Shift+Tab; di√°logos travam foco; `Esc` fecha.
* **Leitores de tela:** use `aria-live polite/assertive` para feedback; `aria-busy` em regi√µes carregando.
* **Tamanho & toque:** alvos **‚â•44√ó44 px**; espa√ßamento entre alvos **‚â•8 px**.
* **Dark/HC:** garanta contraste e **n√£o** codifique informa√ß√£o apenas por cor.

---

## 8) **Motion & Microintera√ß√µes**

* **Durations:** 120‚Äì180 ms (UI micro), 200‚Äì320 ms (entradas/sa√≠das), 400‚Äì600 ms (transi√ß√µes de p√°gina).
* **Easing:** `cubic-bezier(.2,.8,.2,1)`; springs para gestos.
* **Princ√≠pios:** relev√¢ncia (guia aten√ß√£o), continuidade (preserva contexto), conten√ß√£o (evite extravag√¢ncia).
* **Reduced motion:** substitua transforma√ß√µes por fades discretos.

---

## 9) **Conte√∫do & Microcopy**

* **Clareza > carisma:** frases curtas, voz ativa, verbo no in√≠cio (‚ÄúConectar conta‚Äù).
* **Erros √∫teis:** diga o que houve, por que importa e como resolver.
* **Unidades e formatos:** localize n√∫mero, moeda, data com `Intl.*`.
* **Evite jarg√£o**; forne√ßa hints on-demand (`?` / popover).

---

## 10) **Mobile-first & Gestos**

* **Thumb zones:** a√ß√µes prim√°rias ao alcance do polegar (inferior).
* **Gestos com salvaguarda:** swipe tem eco visual + alternativa por bot√£o.
* **Teclados corretos:** `inputmode`/`type` adequados (num√©rico, email, decimal).

---

## 11) **Desempenho**

* **Imagens:** AVIF/WebP, `srcset/sizes`, `priority` para LCP, `loading=lazy` no resto.
* **C√≥digo:** RSC + `Suspense`/streaming; code-split por rota/componente pesado.
* **Cache:** `stale-while-revalidate`; prefetch em hover/viewport.
* **Sem CLS:** reservar espa√ßo (`aspect-ratio`); `font-display: swap`.
* **Anima√ß√µes:** s√≥ `transform/opacity`.

---

## 12) **Seguran√ßa, Privacidade e √âtica de UX**

* **Permiss√µes contextuais:** pe√ßa quando necess√°rio, explique benef√≠cio.
* **Dados sens√≠veis:** mascarar por padr√£o, revelar sob a√ß√£o expl√≠cita.
* **Sem dark patterns:** crescimento por valor, n√£o por truque.

## 13) **Heur√≠sticas cognitivas ‚Üí Aplica√ß√£o**

Formato por item: Quando aplicar ‚Üí Fa√ßa (regra com n√∫mero) ‚Üí Evite (anti-padr√£o) ‚Üí Exemplo ‚Üí QA/M√©trica.

**Aesthetic‚ÄìUsability Effect ‚Äî apar√™ncia limpa aumenta toler√¢ncia a falhas**
‚Ä¢ Quando: telas com alto atrito (erro, cadastro, pagamento).
‚Ä¢ Fa√ßa: use no m√°x. **2 pesos de fonte** e **3 tons** por bloco; alinhe a **grid 8-pt**.
‚Ä¢ Evite: ‚Äúembelezar‚Äù reduzindo contraste (quebra APCA).
‚Ä¢ Exemplo: formul√°rio de checkout com 1 cor de destaque (CTA), 1 cor neutra para campos, 1 para estados.
‚Ä¢ QA: APCA Lc ‚â• 75; varia√ß√£o de spacing apenas em m√∫ltiplos de 4.

**Choice Overload ‚Äî excesso de op√ß√µes paralisa**
‚Ä¢ Quando: menus, filtros, modais de escolha.
‚Ä¢ Fa√ßa: mostrar **‚â§3 op√ß√µes prim√°rias**; mover o resto para ‚ÄúMais op√ß√µes‚Ä¶‚Äù.
‚Ä¢ Evite: dropdowns com >8 op√ß√µes sem busca.
‚Ä¢ Exemplo: plano ‚ÄúB√°sico/Pro/Empresarial‚Äù e link ‚ÄúComparar todos‚Äù.
‚Ä¢ QA: contagem de a√ß√µes vis√≠veis ‚â§3; tempo-at√©-clique no prim√°rio ‚â§3 s (p95).

**Chunking ‚Äî agrupar reduz esfor√ßo**
‚Ä¢ Quando: formul√°rios e onboarding.
‚Ä¢ Fa√ßa: **‚â§6 campos por passo**; t√≠tulos curtos por grupo.
‚Ä¢ Evite: um √∫nico passo com >10 campos.
‚Ä¢ Exemplo: KYC em 3 passos (Dados, Endere√ßo, Documentos).
‚Ä¢ QA: taxa de abandono por passo ‚â§ baseline +2 p.p.

**Cognitive Bias ‚Äî previs√µes enviesadas**
‚Ä¢ Quando: compara√ß√µes de planos, resultados, recomenda√ß√µes.
‚Ä¢ Fa√ßa: nomes literais; **compara√ß√£o lado a lado** com mesmas m√©tricas.
‚Ä¢ Evite: ‚ÄúPopular‚Äù sem crit√©rio; gr√°ficos truncados.
‚Ä¢ Exemplo: tabela com pre√ßo/m√™s, taxas, limites, SLA.
‚Ä¢ QA: texto de r√≥tulos passa revis√£o de clareza; nenhum eixo truncado.

**Cognitive Load ‚Äî esfor√ßo mental total**
‚Ä¢ Quando: qualquer tela com m√∫ltiplas a√ß√µes.
‚Ä¢ Fa√ßa: **1 objetivo prim√°rio** por tela; √≠cones + texto.
‚Ä¢ Evite: 2 CTAs de mesmo peso.
‚Ä¢ Exemplo: ‚ÄúConectar conta‚Äù como prim√°rio; ‚ÄúPular por agora‚Äù como texto.
‚Ä¢ QA: heatmap com foco ‚â•60% no CTA prim√°rio.

**Doherty Threshold (<400 ms) ‚Äî respostas √°geis mant√™m ritmo**
‚Ä¢ Quando: cliques que disparam processamento.
‚Ä¢ Fa√ßa: a√ß√µes locais **<100 ms**; feedback vis√≠vel em **‚â§150 ms**; skeleton entre **150‚Äì800 ms**.
‚Ä¢ Evite: spinner solto sem placeholder.
‚Ä¢ Exemplo: enviar formul√°rio ‚Üí bot√£o vira ‚ÄúSalvando‚Ä¶‚Äù em 120 ms.
‚Ä¢ QA: INP p75 ‚â§200 ms; atraso de feedback ‚â§150 ms em tracing.

**Fitts‚Äôs Law ‚Äî tamanho/dist√¢ncia importam**
‚Ä¢ Quando: bot√µes e itens clic√°veis.
‚Ä¢ Fa√ßa: alvos **‚â•44√ó44 px**; padding aumenta √°rea clic√°vel.
‚Ä¢ Evite: √≠cones de 16 px como alvo √∫nico.
‚Ä¢ Exemplo: √≠cone + label com padding X-Y de 8/12.
‚Ä¢ QA: auditoria autom√°tica de alvos (‚â•44 px) passa em 100% dos bot√µes.

**Flow ‚Äî foco sem fric√ß√£o**
‚Ä¢ Quando: tarefas longas (edi√ß√£o, escrita, upload).
‚Ä¢ Fa√ßa: modo imersivo (distra√ß√µes off), **autosave** e **undo**.
‚Ä¢ Evite: modais interruptivos durante edi√ß√£o.
‚Ä¢ Exemplo: editor com autosave a cada 3 s e toast ‚ÄúAltera√ß√µes salvas ‚Äì Desfazer‚Äù.
‚Ä¢ QA: queda de foco (blur) por minuto ‚â§2.

**Goal-Gradient ‚Äî motiva√ß√£o cresce no fim**
‚Ä¢ Quando: multi-etapas.
‚Ä¢ Fa√ßa: **progress bar ver√≠dica** + √∫ltimos passos mais curtos.
‚Ä¢ Evite: barras que pulam de 10%‚Üí90%.
‚Ä¢ Exemplo: ‚ÄúFaltam 2 passos: Assinar, Confirmar‚Äù.
‚Ä¢ QA: abandono no pen√∫ltimo passo ‚â§ pen√∫ltimo-1.

**Hick‚Äôs Law ‚Äî mais op√ß√µes = mais decis√£o**
‚Ä¢ Quando: configura√ß√µes avan√ßadas.
‚Ä¢ Fa√ßa: presets opinativos; `‚åòK/Ctrl K` para power users.
‚Ä¢ Evite: 20 toggles sem preset.
‚Ä¢ Exemplo: ‚ÄúRecomendado: Seguro/Equilibrado/Agres.‚Äù
‚Ä¢ QA: tempo at√© concluir configura√ß√£o p95 ‚â§ 45 s.

**Jakob‚Äôs Law ‚Äî padr√µes familiares vencem**
‚Ä¢ Quando: navega√ß√£o, formul√°rios, tabelas.
‚Ä¢ Fa√ßa: usar componentes shadcn antes de custom.
‚Ä¢ Evite: renomear ‚ÄúSalvar‚Äù para ‚ÄúConcluir jornada‚Äù.
‚Ä¢ Exemplo: √≠cone de lupa para busca, engrenagem para settings.
‚Ä¢ QA: teste moderado: 90% dos novos acertam o fluxo sem instru√ß√£o.

**Gestalt ‚Äî Common Region / Proximity / Similarity / Uniform Connectedness / Pr√§gnanz**
‚Ä¢ Quando: listas, cards, grupos de filtros.
‚Ä¢ Fa√ßa: separar grupos com **cards/bordas leves**, espa√ßo entre grupos **‚â•2√ó** o espa√ßo entre itens; mesmos estilos para itens da mesma categoria; chips/linhas conectando filtros ativos ao resultado; estruturas simples e previs√≠veis.
‚Ä¢ Evite: listar conte√∫dos heterog√™neos sem agrupamento.
‚Ä¢ Exemplo: filtros ativos em chips acima da lista, card com header e a√ß√µes no rodap√©.
‚Ä¢ QA: leitura em Z clara em review; contraste e hierarquia verificados.

**Mental Model ‚Äî alinhar expectativa**
‚Ä¢ Quando: dom√≠nios espec√≠ficos (finan√ßas, log√≠stica).
‚Ä¢ Fa√ßa: termos do dom√≠nio do usu√°rio; ordem de campos conforme o fluxo mental.
‚Ä¢ Evite: jarg√£o interno da empresa.
‚Ä¢ Exemplo: ‚ÄúTaxa por transa√ß√£o‚Äù em vez de ‚ÄúMDR interno‚Äù.
‚Ä¢ QA: teste de 5 usu√°rios: ‚â•4 interpretam sem ajuda.

**Working Memory (4¬±1) ‚Äî limite de itens simult√¢neos**
‚Ä¢ Quando: menus e pain√©is.
‚Ä¢ Fa√ßa: **at√© 5 itens** por grupo; ‚ÄúVer mais‚Äù progressivo.
‚Ä¢ Evite: mega-menus com 12 itens planos.
‚Ä¢ Exemplo: 5 links no header; o resto em menu ‚ÄúMais‚Äù.
‚Ä¢ QA: taxa de erro de navega√ß√£o ‚â§ baseline.

**Occam‚Äôs Razor ‚Äî simplicidade suficiente**
‚Ä¢ Quando: decidir entre duas solu√ß√µes.
‚Ä¢ Fa√ßa: prefer√™ncia por menos passos/estados mantendo requisitos.
‚Ä¢ Evite: adicionar wizard se 1 tela resolve.
‚Ä¢ Exemplo: upload com arrastar-e-soltar + bot√£o ‚ÄúSelecionar arquivo‚Äù (sem modal).
‚Ä¢ QA: contagem de estados/rotas n√£o aumenta sem ganho.

**Paradox of the Active User ‚Äî ningu√©m l√™ manual**
‚Ä¢ Quando: onboarding e primeiras a√ß√µes.
‚Ä¢ Fa√ßa: exemplos preenchidos + dicas contextuais na a√ß√£o.
‚Ä¢ Evite: tutorial de 8 telas antes de uso.
‚Ä¢ Exemplo: campo com placeholder ‚Äúex: 123.456.789-00‚Äù.
‚Ä¢ QA: tempo at√© primeira a√ß√£o ‚â§ 10 s.

**Pareto (80/20) ‚Äî foque no que importa**
‚Ä¢ Quando: prioriza√ß√£o de backlog/UI.
‚Ä¢ Fa√ßa: otimizar top-5 fluxos; raros v√£o pro avan√ßado.
‚Ä¢ Evite: polir tela pouco usada antes do core.
‚Ä¢ Exemplo: priorizar checkout, n√£o tema de perfil.
‚Ä¢ QA: 80% dos eventos pertencem aos fluxos otimizados.

**Parkinson‚Äôs Law ‚Äî tarefa expande no tempo dispon√≠vel**
‚Ä¢ Quando: configura√ß√µes longas.
‚Ä¢ Fa√ßa: timeboxes vis√≠veis (‚Äú~2 min‚Äù), passos com dura√ß√£o estimada.
‚Ä¢ Evite: flows sem previs√£o de esfor√ßo.
‚Ä¢ Exemplo: ‚ÄúEste passo leva ~30 s‚Äù.
‚Ä¢ QA: tempo real vs. estimado dentro de ¬±30%.

**Peak-End Rule ‚Äî pico e final ficam na mem√≥ria**
‚Ä¢ Quando: conclus√£o de tarefa.
‚Ä¢ Fa√ßa: 1 momento ‚Äúwow‚Äù controlado + tela final com pr√≥ximos passos claros.
‚Ä¢ Evite: fim sem confirma√ß√£o.
‚Ä¢ Exemplo: ‚ÄúCart√£o criado üéâ ‚Äî Adicionar ao Apple Pay‚Äù.
‚Ä¢ QA: CES (Customer Effort Score) no fim ‚â• baseline +10%.

**Postel‚Äôs Law ‚Äî entrada tolerante, sa√≠da estrita**
‚Ä¢ Quando: inputs variados.
‚Ä¢ Fa√ßa: aceitar formatos flex√≠veis; normalizar ao salvar.
‚Ä¢ Evite: erro por espa√ßo/tra√ßo.
‚Ä¢ Exemplo: aceitar ‚Äú(31) 99999-9999‚Äù e salvar `+5531999999999`.
‚Ä¢ QA: taxa de erro de formata√ß√£o <1%.

**Selective Attention ‚Äî s√≥ alguns est√≠mulos vencem**
‚Ä¢ Quando: dashboards/listas densas.
‚Ä¢ Fa√ßa: hierarquia por tamanho/contraste; esconder ru√≠do por padr√£o.
‚Ä¢ Evite: 4 destaques simult√¢neos.
‚Ä¢ Exemplo: 1 badge de status com cor; resto cinza.
‚Ä¢ QA: rastreio ocular: 1¬∞ fixa√ß√£o no KPI certo.

**Serial Position Effect ‚Äî in√≠cio/fim lembrados melhor**
‚Ä¢ Quando: listas/menus longos.
‚Ä¢ Fa√ßa: colocar itens cr√≠ticos no topo; destrutivos no final.
‚Ä¢ Evite: a√ß√£o ‚ÄúExcluir tudo‚Äù no meio.
‚Ä¢ Exemplo: ‚ÄúNovo‚Äù e ‚ÄúImportar‚Äù no topo; ‚ÄúExcluir‚Äù no fim.
‚Ä¢ QA: cliques corretos em teste moderado ‚â•90%.

**Tesler‚Äôs Law ‚Äî complexidade n√£o evapora**
‚Ä¢ Quando: expor par√¢metros.
‚Ä¢ Fa√ßa: defaults bons + ‚ÄúAvan√ßado‚Äù dobr√°vel.
‚Ä¢ Evite: despejar 15 par√¢metros de uma vez.
‚Ä¢ Exemplo: ‚ÄúMostrar op√ß√µes avan√ßadas‚Äù com 6 controles.
‚Ä¢ QA: p95 de tempo para concluir tarefa n√£o piora.

**Von Restorff ‚Äî o diferente chama aten√ß√£o**
‚Ä¢ Quando: CTA principal/alerta.
‚Ä¢ Fa√ßa: **1 destaque por tela** (cor/forma).
‚Ä¢ Evite: dois bot√µes prim√°rios.
‚Ä¢ Exemplo: CTA prim√°rio colorido; secund√°rio contornado.
‚Ä¢ QA: 70%+ dos cliques no CTA certo.

**Zeigarnik ‚Äî inacabado √© lembrado**
‚Ä¢ Quando: tarefas que podem ser interrompidas.
‚Ä¢ Fa√ßa: lista persistente ‚ÄúA concluir‚Äù + retomar onde parou.
‚Ä¢ Evite: perder contexto ao sair.
‚Ä¢ Exemplo: ‚Äú3 pend√™ncias ‚Äî Continuar cadastro‚Äù.
‚Ä¢ QA: retomadas bem-sucedidas ‚â•80% em 24 h.
