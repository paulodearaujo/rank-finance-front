@import "tailwindcss";

@custom-variant dark (&:is(.dark *));

@keyframes shimmer {
  0%,
  100% {
    transform: translateX(-100%);
  }
  50% {
    transform: translateX(100%);
  }
}

@layer base {
  :root {
    --radius: 0.625rem;
    /* Charcoal premium theme (light) */
    --background: oklch(0.99 0 0);
    --foreground: oklch(0.145 0.004 49.25);
    --card: oklch(1 0 0);
    --card-foreground: oklch(0.147 0.004 49.25);
    --popover: oklch(1 0 0);
    --popover-foreground: oklch(0.147 0.004 49.25);
    --primary: oklch(0.19 0.005 49.25); /* near-black charcoal */
    --primary-foreground: oklch(0.985 0.001 106.423);
    --secondary: oklch(0.975 0.001 106.424);
    --secondary-foreground: oklch(0.216 0.006 56.043);
    --muted: oklch(0.975 0.001 106.424);
    --muted-foreground: oklch(0.53 0.012 58.071);
    --accent: oklch(0.975 0.001 106.424);
    --accent-foreground: oklch(0.216 0.006 56.043);
    --destructive: oklch(0.577 0.245 27.325);
    --destructive-foreground: oklch(0.985 0 0);
    --border: oklch(0.885 0.003 48.717); /* slightly stronger for AA */
    --input: oklch(0.9 0.003 48.717);
    --ring: oklch(0.62 0.012 56.259);
    --chart-1: oklch(0.646 0.222 41.116);
    --chart-2: oklch(0.6 0.118 184.704);
    --chart-3: oklch(0.398 0.07 227.392);
    --chart-4: oklch(0.828 0.189 84.429);
    --chart-5: oklch(0.769 0.188 70.08);

    --success: oklch(0.56 0.14 143);
    --warn: oklch(0.72 0.17 75);
    --danger: oklch(0.577 0.245 27.325);

    /* Auth page specific colors */
    --auth-hero-bg: oklch(0.3 0.01 0); /* zinc-800 equivalent */
    --auth-hero-title: oklch(1 0 0);
    --auth-hero-subtitle: oklch(0.7 0.01 0); /* zinc-400 equivalent */
    --auth-hero-brand: oklch(0.8 0.01 0); /* zinc-300 equivalent */
    --auth-hero-text: oklch(0.7 0.01 0); /* zinc-400 equivalent */
    --auth-hero-footer: oklch(0.6 0.01 0); /* zinc-500 equivalent */
    --auth-hero-divider: oklch(0.5 0.01 0 / 30%); /* zinc-700/30 equivalent */
    --auth-skeleton-primary: oklch(0.82 0.003 48.717); /* zinc-200 equivalent */
    --auth-skeleton-secondary: oklch(0.93 0.002 48.717); /* zinc-100 equivalent */
    --auth-skeleton-tertiary: oklch(0.97 0.001 106.424); /* zinc-50 equivalent */
    --auth-logo-opacity: 0.08;
  }
  .dark {
    --background: oklch(0.15 0.004 49.25);
    --foreground: oklch(0.985 0.001 106.423);
    --card: oklch(0.2 0.006 56.043);
    --card-foreground: oklch(0.985 0.001 106.423);
    --popover: oklch(0.2 0.006 56.043);
    --popover-foreground: oklch(0.985 0.001 106.423);
    --primary: oklch(0.92 0.003 48.717);
    --primary-foreground: oklch(0.216 0.006 56.043);
    --secondary: oklch(0.27 0.007 34.298);
    --secondary-foreground: oklch(0.985 0.001 106.423);
    --muted: oklch(0.27 0.007 34.298);
    --muted-foreground: oklch(0.71 0.01 56.259);
    --accent: oklch(0.27 0.007 34.298);
    --accent-foreground: oklch(0.985 0.001 106.423);
    --destructive: oklch(0.704 0.191 22.216);
    --destructive-foreground: oklch(0 0 0);
    --border: oklch(1 0 0 / 14%);
    --input: oklch(1 0 0 / 18%);
    --ring: oklch(0.58 0.013 58.071);
    --chart-1: oklch(0.488 0.243 264.376);
    --chart-2: oklch(0.696 0.17 162.48);
    --chart-3: oklch(0.769 0.188 70.08);
    --chart-4: oklch(0.627 0.265 303.9);
    --chart-5: oklch(0.645 0.246 16.439);

    --success: oklch(0.66 0.15 143);
    --warn: oklch(0.82 0.14 75);
    --danger: oklch(0.704 0.191 22.216);

    /* Auth page specific colors - dark mode */
    --auth-hero-bg: oklch(0.2 0.01 0); /* zinc-800 in dark */
    --auth-hero-title: oklch(1 0 0);
    --auth-hero-subtitle: oklch(0.65 0.01 0); /* zinc-400 in dark */
    --auth-hero-brand: oklch(0.75 0.01 0); /* zinc-300 in dark */
    --auth-hero-text: oklch(0.65 0.01 0); /* zinc-400 in dark */
    --auth-hero-footer: oklch(0.55 0.01 0); /* zinc-500 in dark */
    --auth-hero-divider: oklch(0.45 0.01 0 / 30%); /* zinc-700/30 in dark */
    --auth-skeleton-primary: oklch(0.35 0.003 48.717); /* zinc-200 in dark */
    --auth-skeleton-secondary: oklch(0.25 0.002 48.717); /* zinc-100 in dark */
    --auth-skeleton-tertiary: oklch(0.2 0.001 106.424); /* zinc-50 in dark */
    --auth-logo-opacity: 0.08;
  }
}

/* Base theme tokens for Tailwind v4 */
@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);

  /* Auth colors */
  --color-auth-hero-bg: var(--auth-hero-bg);
  --color-auth-hero-title: var(--auth-hero-title);
  --color-auth-hero-subtitle: var(--auth-hero-subtitle);
  --color-auth-hero-brand: var(--auth-hero-brand);
  --color-auth-hero-text: var(--auth-hero-text);
  --color-auth-hero-footer: var(--auth-hero-footer);
  --color-auth-hero-divider: var(--auth-hero-divider);
  --color-auth-skeleton-primary: var(--auth-skeleton-primary);
  --color-auth-skeleton-secondary: var(--auth-skeleton-secondary);
  --color-auth-skeleton-tertiary: var(--auth-skeleton-tertiary);
}

@layer utilities {
  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  .animate-fade-in {
    animation: fade-in 200ms ease-out;
  }

  /* WCAG AAA Dropdown Menu Styles */
  [role="menu"] {
    --dropdown-bg: var(--card);
    --dropdown-border: var(--border);
    --dropdown-text-primary: var(--foreground);
    --dropdown-text-secondary: color-mix(in oklch, var(--foreground) 85%, transparent);
    --dropdown-text-muted: color-mix(in oklch, var(--foreground) 70%, transparent);
    --dropdown-hover-bg: var(--accent);
    --dropdown-hover-text: var(--accent-foreground);
    --dropdown-focus-ring: var(--ring);

    /* Ensure WCAG AAA contrast ratios */
    @supports (color: oklch(0 0 0)) {
      --dropdown-text-primary: oklch(0.2 0.01 0);
      --dropdown-text-secondary: oklch(0.3 0.01 0);
      --dropdown-text-muted: oklch(0.4 0.01 0);
    }
  }

  .dark [role="menu"] {
    @supports (color: oklch(0 0 0)) {
      --dropdown-text-primary: oklch(0.95 0 0);
      --dropdown-text-secondary: oklch(0.85 0 0);
      --dropdown-text-muted: oklch(0.75 0 0);
    }
  }

  /* Auth specific color utilities */
  .bg-auth-hero-bg {
    background-color: var(--auth-hero-bg);
  }
  .text-auth-hero-title {
    color: var(--auth-hero-title);
  }
  .text-auth-hero-subtitle {
    color: var(--auth-hero-subtitle);
  }
  .text-auth-hero-brand {
    color: var(--auth-hero-brand);
  }
  .text-auth-hero-text {
    color: var(--auth-hero-text);
  }
  .text-auth-hero-footer {
    color: var(--auth-hero-footer);
  }
  .border-auth-hero-divider {
    border-color: var(--auth-hero-divider);
  }
  .bg-auth-skeleton-primary {
    background-color: var(--auth-skeleton-primary);
  }
  .bg-auth-skeleton-secondary {
    background-color: var(--auth-skeleton-secondary);
  }
  .bg-auth-skeleton-tertiary {
    background-color: var(--auth-skeleton-tertiary);
  }
}

:root {
  --sidebar: oklch(0.985 0.001 106.423);
  --sidebar-foreground: oklch(0.147 0.004 49.25);
  --sidebar-primary: oklch(0.216 0.006 56.043);
  --sidebar-primary-foreground: oklch(0.985 0.001 106.423);
  --sidebar-accent: oklch(0.97 0.001 106.424);
  --sidebar-accent-foreground: oklch(0.216 0.006 56.043);
  --sidebar-border: oklch(0.923 0.003 48.717);
  --sidebar-ring: oklch(0.709 0.01 56.259);
}

.dark {
  --sidebar: oklch(0.216 0.006 56.043);
  --sidebar-foreground: oklch(0.985 0.001 106.423);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0.001 106.423);
  --sidebar-accent: oklch(0.268 0.007 34.298);
  --sidebar-accent-foreground: oklch(0.985 0.001 106.423);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.553 0.013 58.071);
}

@theme inline {
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground antialiased;
    font-family: "Inter", ui-sans-serif, system-ui, -apple-system, sans-serif;
    font-feature-settings:
      "rlig" 1,
      "calt" 1;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-semibold;
  }

  h1 {
    @apply text-3xl;
  }

  h2 {
    @apply text-2xl;
  }

  h3 {
    @apply text-xl;
  }

  h4 {
    @apply text-lg;
  }
}

@layer utilities {
  .touch-target {
    min-width: 44px;
    min-height: 44px;
  }

  .skeleton {
    @apply animate-pulse bg-muted;
  }

  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* Elegant loading blur overlay */
  @keyframes blurPulse {
    0%,
    100% {
      backdrop-filter: blur(8px) saturate(120%);
      background: color-mix(in oklch, var(--background) 26%, transparent);
    }
    50% {
      backdrop-filter: blur(14px) saturate(140%);
      background: color-mix(in oklch, var(--background) 38%, transparent);
    }
  }

  .overlay-blur-strong {
    backdrop-filter: blur(10px) saturate(130%);
    background: color-mix(in oklch, var(--background) 32%, transparent);
  }

  /* Stronger blur for initial page load */
  .overlay-blur-initial {
    backdrop-filter: blur(20px) saturate(150%);
    background: color-mix(in oklch, var(--background) 85%, transparent);
  }

  .animate-blur-pulse {
    animation: blurPulse 1.25s ease-in-out infinite;
  }

  /* Smooth fade-in animation */
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fade-in 0.5s ease-out;
  }

  /* Ensure cursor is visible in inputs */
  input:focus {
    caret-color: var(--foreground);
  }

  @media (prefers-reduced-motion: reduce) {
    .animate-blur-pulse {
      animation: none;
    }
    .animate-fade-in {
      animation: none;
    }
  }

  .glass {
    backdrop-filter: blur(10px);
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.18);
  }

  .glass-dark {
    backdrop-filter: blur(10px);
    background: rgba(0, 0, 0, 0.5);
    border: 1px solid rgba(255, 255, 255, 0.08);
  }

  /* liquid-glass removed */
}

@layer components {
  .card-hover {
    @apply transition-all duration-200 hover:shadow-md hover:-translate-y-0.5;
  }
  /* Framed media: make tall screenshots feel native without heavy borders */
  .media-frame {
    background: color-mix(in oklch, var(--background) 92%, var(--foreground) 8%);
    border-radius: 0.5rem;
    box-shadow:
      0 0 0 1px color-mix(in oklch, var(--border) 70%, transparent),
      0 1px 2px color-mix(in oklch, var(--foreground) 10%, transparent);
  }

  .chip {
    @apply inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full;
  }

  .chip-success {
    @apply bg-[var(--success)]/10 text-[var(--success)] dark:bg-[var(--success)]/20 dark:text-[var(--success)];
  }

  .chip-danger {
    @apply bg-destructive/10 text-destructive dark:bg-destructive/20 dark:text-destructive;
  }

  .chip-neutral {
    @apply bg-muted text-muted-foreground dark:bg-muted dark:text-muted-foreground;
  }

  .chip-accent {
    @apply bg-primary/10 text-primary;
  }

  /*
    Neutral glass surface for overlays over imagery that must keep its own
    color identity (e.g., status badges). The background is derived from the
    app surface color instead of the status color to avoid hue shifts caused by
    translucency over saturated screenshots. Inspired by Apple/Uber frosted UI.
  */
  .badge-glass {
    /* Slightly opaque neutral surface + strong blur to decouple from image */
    background: color-mix(in oklch, var(--background) 82%, transparent);
    @apply backdrop-blur-md backdrop-saturate-150 shadow-sm border-white/10 dark:border-white/15;
  }
  /* When backdrop-filter is available we can reduce the fill a bit more */
  @supports (backdrop-filter: blur(4px)) {
    .badge-glass {
      background: color-mix(in oklch, var(--background) 70%, transparent);
    }
  }

  /* Pointer cursor helper for clickable media */
  .cursor-pointer {
    cursor: pointer;
  }
}
